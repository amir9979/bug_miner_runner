# This is a basic workflow to help you get started with Actions 

name: CI 

# Controls when the action will run. Triggers the workflow on push or pull request   
# events but only for the master branch
on:
  push:
    branches: [ master ]

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  build:
    # The type of runner that the job will run on
    runs-on: windows-latest
    
    strategy:
      fail-fast: false
      matrix:
        commit: [ca6b5ca5614867a682b966fdfa35a6f7b48c1591, 4d89ea2c6349fe07b5dfc1134fa5cd4960a33710, 7bb35308304dcd0a1ae51f1fceab4ffa8a83c4bf, 8bd0ccb910e824ff64cf3d2f716ddea3c4295f24, 2354fe66ca0c7b6e16c8dc7b44bd73eaa975c057, 2f0fa3b65a48bc4042491324cc546f9c32536c20, 7ed838caf2579be3c2d450cad8b61a10cf36ef0e, 5df8f87c4c865942a0c0990bc2c00a6d2ad0320d, ebe7995a870c96ad5a7c9b05ed24bdb940bd166a, d569761e7a729085ea47db39f66ea7ce7bfc130f, cee95ede1a153f8ad70c37d8d4b37bfb3d4df37b, 3b33da246f59f0862dc725d42aeeae7ebeb20706, 246133a2d4ba6980217e04efabacef652a4a460c, 04cc72cd77c4f0d618f6dea7981779fae9807518, f5fa65fcc54f08e6ba57cb4b396753fbaa918c4a, 3aab15f8f277614e3c5783c4862e25d63b737425, 0b37895ef0eae560444e3078b7fa33f6fec11eca, af2aabb03cd876b9eaf04cf0496290a979b70e19, 414c592f8e1bb45a6a9ef223670044a1a2a34dff, c5038b8fd110a3305645ad9791a6d10315ca577f, 26293c081dec22ba22f232f6d3d73c66a81e2ee9, a463b9fd2ac3046b7e669b3549385f962a2482f5, 1cc319fa07f06043d7a39f64cca478e4441899dc, 1e7a8745f159ecdb068b7088b0a435d9f9175854, 6b9a82f8bfd59526ec03693e9e0262698a5ff165, 035dab3ff15c964c0bf04652b88e2aacde92eb44, dce07df9ea5f1be024e20cf809ffde6425b6368c, 6c6c17dc1ad9fefa5f795410cce937af56b4558f, c9dfb89f029fe349a6057bec88d838b0200b9337, 4307560767072216358f604fb9147f947c7dac85, 296e279858af9112d5500cc9a828a2d87d3218f5, f091ceb5b45e5d1f42822f380435af4c1607f5fc, 120c23875a61e1946125c37931b980964fe24d2a, ad11aac0a56344521d33306b36f645f984173531, 41ca17f4d54a2b679865add19c0aa91aba2d665e, 3922b01361d5958a31c199e376e7a979a3a6d376, 4acfd543308ac23530df6db8c261d5f511d84bbd, d7853341f0aa1aae008aa34fd6bd5b8c8b9e96fe, 5649aaa95ebf03d3feaf05304dbc99b94fef186d, 4130936af0bb140355c65354c6e4a9894c19b3a5, 1b6a5639611fcea5e81d6891fced6340832b3680, 934fd0e6af5369d46501855c3c396f604d82f4ff, 02b1eaa1d6a8c895fd05c35a4fdcab72001ece92, 0297f443cdd0083445d3a37ca35d8ca87a5ec1e9, 3366bc606de640b9f25ce58ffb9ba847b4ddb6f9, 4f06e2c212fe0df7c22445472627d2a4a028a1c4, 268a815aef7a2c48d28fc3431fc77061524b1a00, 44082d3dd456a88c9d79b5a600db88a1a865416c, 2369149b6e1ea32b7f6dd5fb6a55740686b0b602, 7b472396f34e76d806e184bef667b1c63c83c5a9, 8ffd67c92ba44caf877a0d3b28772569d15a1c75, 92fb7689c01ea4eb860d91dc72e36e263d2ab7e0, 547831105073e44f8c8551bf48fe9e834861dc20, c35e257eb446caf6b9bb98364f93d9ce23d92975, 6a60a798c69674fcb55c1f05eba0f134590f687c, dab7788ab4e24cfd39fddef6939f2dc3304a5ea3, 6e9f796f15bf6640f8d43940d4bae13b609869df, cead1d087f3a8578c379710827b37998dadf9260, 8410067c3d518e43d3f24d53832f5a3601157bba, 9a4f57672a27db0a161a4ff3e24551b2c8c529ea, 6be752c7e867ece0db96f36e8166cf97f8e5032a, 906858434d9784e893bac24c63c1b15ea35fd3c1, d53fa483cb06a1afa5e10cdcce2bb42f980216a2, c53af436f0e7469a711fb92c931cb783f238db8e, f534fcec349341e89715381a8938c53d63230129, 8979094a575b6432372855ddb149e9056ce99a8d, 74574e38cb2f53395c185742928052d17b181b5a, a0325c2480357c99dff0fa99248886d3372269fa, bc24ccb302d1454a226dbfd38337b8f8050d7e4a, 587e4ae5b0a87e01315156115c8b88d056036f96, 67e2c5a80bc884818c3f905a26c396c57608d75f, 5638ebc0db0b88341ba663d5ba12eebbe2925240, e76302196ebcafb7b51fce37fbe8256e6c0fbc51, 7b869c0c1b132feb691dca645fe9bc689bf320e2, 31625a2ad6b9a4de73aa322845fb1e38ba96177d, d795c5fe92f6a2de1811515ec7851485a2840c74, 91913d37243cdab7a8a0c0de132b538ed6b0419e, 0dd035b9be57a71ba23a29120f1e2153a3178b5b, 895590e57650e805ecf8561742e06c4f504f664b, e543c5b40ec687c3ab31f7b61f3bfe953cc37b17, 5bffa845bd39af4b743a026243fcb0ab1a49e395, a5e95841c9999bb8350043b80ce792f9f5eacdd9, 5cbfe94b115934b04cea4954af97a4dbc1285393, 1f2b7168893b8e7e3cb20aaf7992e057d449dd79, fa6bb7e3c92145d29cd97820718ece69fd6ffd62, 2e18733f93866c5670c0af0d0b88262508882f8b, ae5915aa8fcc10f0dedb9a3454e42ff1f101ecc8, 7fdba7e3aca7f53baceb77b57d8692065b9da816, 415381212291e843e9091f43f6db8c432eb02aa9, 72d2d88b381ba75942ae791042ef54af33ee1f38, 71cb9363c07839e68712edde4626d53aa928cc2a, bd9a9b911b4e0205c9dfd4527063e6e1c0fd0c44, d698d49793bb96aee6a8bfcc4a174c922cb83cb8, 7dc5c671f892bac79d8fb2d55e9e94718ca31cbe, 85e53850026aadce49bc99c1ef2de9d5c7be0451, aac3af4ccb9da07b1ade1a57ed5e015dbedb17c4, c0fb57d9d20e8eb7cb77bce8742e4566a18f5db8, 9b86c8578c9ab17e94ee080f498a86feaadfe6f1, 60bba0696868fe1bb027e2ab3e5b7bbfbd0b75cc, c9f08c28599ca08fa5aad06aed41f6da5de4737c, 464a9087931540b18b016d07dc39fa5cb21c60d4, 6464286bad883200d991709041d3b981198606e9, 7c83be9c00d203e22c8d042a802f719fa3297195, 550a2dc1a50ad9f0d5d358b7f520e20292b4ce5c, 32d2989e2fbc64cba3ac4eea29046f9babc1414e, 2a6d72672029eda0fa94547c0febf84b57a6bc6c, e167f836e62ef2e0cb0c853ee6a1f1219825c20b, 073a36a4e54d6541923bb47f682088cb9838ae4b, a77cf075e846390fc25768b1cc8c59a56c2ab9e3, 2e25dc0d756327e90cfbfca1b27e440b4a2e8b21, 006831e911d0583045379830ffd77ec58ffb351d, e11ead4e079a326bc22be640894b46cd6131037d, 59ec6ce2fcb68ec2cefdc0e52edd84196abe77d0, 7789252dcac009d0d0000ecde339bbda318acadf, 7d67ade82b0022851d5f8c6d6811328b200d10f6, d806c4d505445bd764541a5061963c5e99088390, de1a3536a9a92d9d4af33f89abaefbe3dd85de31, 816eb2675a0c9bbdcfcb0bba139cbad0a7a5d35b, ead95c8f3034db138f567be98da4503814ed0366, b6bcbd9db2c10ba2358da965a65f91939ec69deb, 8b7a1d436b9fe8682b6f93872f7b8ff943b30c4a, 16669e3404af089f19ea3c7227523efa67f84410, 77e1d38f04b61ff10d18b1db91fd4850baef247d, 4b0936c4308d2e2205c3ed827f1a638b8ab7a0a0, ed76d40afc698586b33a13bb38d34b3ad3c5f5c2, 50dd48644facd17ac443feadffc07c4c0c433519, 3e05c0722f06cb561e4136d63630fc3a0c57c7f2, e448a959e15fec4a50ebde33a481d83d405cede9, b0ddfce1f900e94e7f524a82544e0fb98ee61a88, a85081207afc8d5bc7c9a9e9c09ad72b3c6743c2, a54b37a407abbf72e9ac8f5867f873736757e1bf, d3c776ce35940cfb5f4b8127d239e580860a5bbd, b5a79c85d13ce512fe3346653637d809efeda4c4, 9e0a87e68a0a6b45a2f740a58b0db99d9eeecb4a, a20c46cc71e7a83a5c5cb4256f5c6a753b901a90, 40f8ec95b1c1c2e1713d26e0780b3bd2f97c9bb1, 3ca9214cfda576ffd7aba2b1216fd36733266837, fbd766e254a950e4a224408853658e983c0a4788, 7aeb95d6c7a6ac3611f2dd975baa73f566631061, 0a1ffa962bdb919c2bef73754f40f20106c6c555, 73741e79fb02e73c5a35eaddc8ff77d8312f4d0e, 3e14505381eefa603adabe61171c0c19fc685b2f, 99aa587d171207c0c557ce65397f767d6a42cdfd, 88f140f5cfd63202a48bab7a43e2c6cae05ea8da, 90ff7e32c5845138ef469cd06212545bfd0d789d, 8afa4df9469b12f1be3dfaa1b2a136e8fa2c7988, ae19bd1e996dec24236b1d555ef99e6c2a1cbd6b, 1d9e44ed7b8ca4cb2a7033683f3ceb1828b2c56b, 1c07dc9c2a03cd59f41a73420a568abfaacc7b5d, 2593a50e66a7a8543105158a27ad8e680634db27, 4b330263d1759c35886e6243d5edc5426be54029, 5c8195986744fb75f11388e4205d0d39f882c60d, c5280aeeea321f41260a414a4d02f2540e36bf2d, 1a1fa651636b3af8919a7bf1ad87d5b8f23780b7, 00afd536d98a496ae88c523a9e0d511e6b765538, 9dbebc4ec825b6e7dab852c3d3427b003c8b81eb, 3dd12110dad0e5a71555d4e4a0e5a6cd609b0fb7, 21c35f73d28d88d0ec8db91a7a458fe70da85f84, e085bf2adf721fd107a08cf64923859fd4c46f42, f708b84da1cd1721deffef7f043eb3f6ba8d1342, 6a398bd3f6245543091fd7c0e9e4facb34a26882, f1c5c6912873837a3317a55d5426a271b1874322, ceccd0b65b0a24bf44f4566a94c901c7c40135f6, 67612b8f805ad5d1085db14922d3b3b6ddce19bf, 556ee2ad852fde5c45ee481809df30862977aa65, 6f7177ff791539fd277e7dc59e0f7fbe5e3f0e5a, 91422cb971440950403688f0cadb10e814d39250, 2a560ebd11beff94f105b7adab4a367f9388527a, e07bbf8edb5403aa8ee77be45ce1bc31f2c162b5, 0a1a8842762b3ea03af7805d7fd5c5c09b2972db, e607d65bc58087116408988342331dcb20ff9bba, 5e320cdda247476e63f065a3e4ef3d4945087399, d80fcf1229fd85c579a5ec14fdc3f2cc29e162de, 20ab62de27c7e34d1c09b3cd0a14c0e32e59994b, b2fcf77acc20e4dcf016b121cb0ccf53ca7ff2da, 4c6313ff8424a8b8eda7c2c6aa6f9406660ff946, 433f21c4805e7bb930964f87d15c30f62e0eb5d5, 9c9d6f85aa15ab2e65d103b0b0d34769dbfe100c, 98eb56ec78f2e1d27de644f4f6647ea1cfbc930b, 9ebf066dd96783c952f4c2a37a2a02af2b0c5aa0, 3f6d06f8b46a14eba6011d781e5e5a86b5043896, 44032dea24f5f1d23dd0a53b1a297369e4fe7890, b4c85685e1bb86d61f5d6bc825af7afa478a50ab, a0ffec146e84fdcf4c747b4375f92ae283944f4c, 5a6626c09de1a7dd904c9456b60ffb20f573f7f4, 375274a100048f3808aa7582e71bf51200b88a14, 9dc084c72fb87729f3344109c8a3146cca52dc90, 717b17387f2b8d3fb0decf4a9699f21e7f673fad, 86b897d84e4974e885a5d2e020f37b6878e4ae80, 281fedfc86acbb5e01015f1462a27a86a65403f0, f5f1ef1195f9d44e39b1713d58cad3eb83b351fb, 62abba6178d70f4255e0e16da9eb456cc150615b, ca890e427a1623b0e100ebe45a49edaacf17db39, 07f6f6341cc11520eb1de18a4b9b712ac514f28d, f7607ecb57cedee963eb5361efd1e55d5b2ea43f, 92b2619c307798127d406643bb27a22dc9abd47f, 5c22595f655362f983e73aca4fb79149f37a17ec, a5cc41a492f7b74d3a4612da9c6e8cac1efe1732, 01bbb05f78a608649dee8614cdb9be7d3d84e496, 90b0f8e906a5890b6c41bfc4f7b234cdbe24bcab, 78a7ceb4e46d1e8b99533dc1261a42773ecf099d, 3b61cea5aba160f9289db7d913aec2c00c3b7a6e, 359aae57ce045de191a14bb369e7980154deffc6, a8e46e9d09040d8aa273918d7bd3363a3a3f3e15, 8316bb2f8a4439b4299e75e70e17188301702fb1, 3b004508773ee65ff2de9e90e12d8926b1a52489, 95051f2a352f3e7ee83acf203d75b803a26c3f4f, 15521f132f69f80a42496a5fc38a49caa27c09cc, f1d00dbf40f16ce8669628951b813d7972c07c45, 9d31098ffa9f9779a28a7cee1b471c71f67b4266, 648b5bf9544ea72be5a9597802a17fc5acb44e1f, a918dd64f4b96c362cf3648ebc9fbb6ec4eeca60, aeebd70b680515661e7aa41bd79fb1a75d0db507, 5c0089a6a30961b5397e08e0ebd10be403541db3, b4888806e35e15b526843ca8b5ff89d38cab5baf, 204532630e37f76817e8677c58301d22ed576fae, d0dfe796e12e08339ac33c7e6d3ed5a0deb936b1, 8c1ff5652c8e2db1db3464f04d603339c6228529, 18f82c74cc8944e6fefb2c88c2bc4d6652500ae6, 11bbc01edef720419f3b68e0487ef057cf13a387, 4658fd738e12bb380b888af906a077da7af1e32d, 6cd30a3fcea1bbdc12c44029f2472130c4f2d17c, ad2259667f97bfb76344e778ee1faf5f208b98d8, 65aea2b06b33c6b53999b6c52e017c38bf2af0b4, bb7ab51eddf12aba8623e6436f3aafa36f989090, ed34e70f0ba7fc01769bed8dbf7f65a1a9058ec0, dd6330f7dfa0f836918306ee718e48f9c4418dbe, 9f10da2479473d7a16e333d727771376af5851df, e64cad2d708e33347c8fa4a8b14a45554dd6b64a, 1cad9b3fc6100a3b0f4a73b5ffac2dd23c680a48, c9d44dbdd1cf61f17ed07d0df36af95d9ca51d0a, 6ef60c2efd0c2607c400ac8b9e66d605a4ea2267, 090001dbcf35c5729167fec0947cff0988f08cfa, 3caba576686bcd6fe9e4501cd13e589a81032e2e, 11970650568d41bd2318d3513c011240b7be3ecf, b8223f9c1353db748a7e1869bd9fe77e5e0ad5d7, 7c51e892ee4d6ca84841759e68fb8334bcc4a13b, 7b15af58944b6e67a9e4ac1a3e2a22ec59388fd0, 164302f56b53a1a8f4169a88d30980a8c2897f47, fa076c5ddf7d6685fb491a6cfe531c4eeb91f542, 76afce1f5f8fa9e638304b838bdea8b5816b3abf, 3ad79a6a21e0039fb451044b2b9e71f83f258311, 9b54a1c37ad20bcd1f79e7026e231862c75eee4d, 2ff952a9137955ae7ce16d7e8908c374b034db35, 57cfc63946ebd79a3732d99955915f5e12fa75ea, d64fb550f400597267382abd95e5bd7c3805fb5b, 728a218d7ea8c0f478cdbd1235e675ed7905314a, bbd3cd3e96c1c09bba0e6e8b3974cb67cff251cb, 6f48f57a6a0f21e6589a1d512a25574425dcc4cb, afc05233775ffde664369dd9e296be00f9e2e79a]
        # Set N number of parallel jobs you want to run tests on.
        # Use higher number if you have slow tests to split them on more parallel jobs.
        # Remember to update ci_node_index below to 0..N-1

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
    # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
    - uses: actions/checkout@v2
    - name: Set up Python
      uses: actions/setup-python@v2
      with:
        python-version: 2.7
    
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install pytest 
        pip install gitpython
        pip install jira
        pip install termcolor 
        pip install openpyxl  
        pip install javalang
        pip install enum 
        pip install pathlib
        pip install junitparser

    - name: Set up JDK 1.8
      uses: actions/setup-java@v1
      with:
        java-version: 1.8

    
    - name: Checkout bugminer
      uses: actions/checkout@v2
      with:
        repository: rotba/BugMiner
        path: .
        fetch-depth: 0
    
    - name: mvnpy
      run: |
        git submodule init
        git submodule update
    
    - name: Checkout javadiff
      uses: actions/checkout@v2
      with:
        repository: amir9979/javadiff
        path: ./javadiff
        fetch-depth: 0
    
    - name: execute miner
      run: python Main.py https://github.com/apache/tika http:\issues.apache.org\jira\projects\TIKA ${{ matrix.commit }}
    
    - name: Upload a log
      uses: actions/upload-artifact@v2
      with:
        # Artifact name
        name: ${{ matrix.commit }}_log.log
        # A file, directory or wildcard pattern that describes what to upload
        path: ./results/tika/log.log
    
    - name: Upload valid
      uses: actions/upload-artifact@v2
      with:
        # Artifact name
        name: ${{ matrix.commit }}_valid_bugs.csv
        # A file, directory or wildcard pattern that describes what to upload
        path: ./results/tika/data/valid_bugs.csv
    


